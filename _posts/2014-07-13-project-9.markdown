---
layout: default
modal-id: 9
title: Finger Cursor
short-caption: Finger Cursor
date: 2024-3-1
img: finger_cursor.gif
alt: image-alt
project-date: 2024-3-1
category: Computer Vision, OpenCV
# github: https://github.com/ME495-Navigation/slam-project-JihaiZhao
description: <h4><strong>Overview</strong></h4><p style="text-align:left;">The purpose of the project is to track the location of fingertip in realtime and draw the path of fingertip movement in 3D.</p><h4><strong>Video Demo</strong></h4><iframe width="700" height="450" src="https://www.youtube.com/embed/WDglRLueaaQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><br><h4><strong>Image Segmentation</strong></h4><p style="text-align:left;">The first step is background subtraction and skin Color extraction. I decided to use YCrCb color ranges since many studies show that YCrCb color ranges are best for representing the skin color region. I first split it into 3 channels (Y, Cr, Cb) and threshold each channel independently. For each channel, I use morphology operators to remove noise and latter combine them using cv2.bitwise_and(mask_Y, cv2.bitwise_and(mask_Cr, mask_Cb)). Last, threshold binarization to smooth the image</p><p style="text-align:left;">The result image after Image Segmentation ​:</p><img class="center" src="img/finger_cursor/image_segmentation.png" alt="profile-pic" width="500" height="390" /><br><h4><strong>Detection​</strong></h4><p style="text-align:left;">Computing a convex hull for an object and compute its convexity is a good way to find the shape of human hand as hand shapes are very well characterized by such defects. The convexity defects getting from openCV include information of start points, end points, depth points, and distance between the farthest contour point and the hull</p><br><p style="text-align:left;">The issue is these information include noise. To determine precise fingers locations, it must meet several criteria below:</p><ul><p style="text-align:left;">i.Depth of each defects must be longer than palm center radius</p></ul><ul><p style="text-align:left;">ii. Angle between start point and end point must be less than 90°</p></ul><br><p style="text-align:left;">To find the angle I implement the law of cosines</p><img class="center" src="img/finger_cursor/detection.png" alt="profile-pic" width="500" height="390" /><p style="text-align:left;">With all the information from the previous steps, I can find all finger locations when the user open palm. Next step, I want to perform gesture recognition based on simple and heuristic assumptions. Currently, I only focus on two gestures</p><ul><p style="text-align:left;">i.Open Palm—4–5 fingers detected</p></ul><ul><p style="text-align:left;">ii.ready to draw—1 fingers detected</p></ul><br><p style="text-align:left;">Dectect the first gesture is realtively easy as I meantioned before. However, the information from the previouse steps are not enough to find the fingertip when use only raise one finger. The way of detecting one finger can be explained by the following picture</p><img class="center" src="img/finger_cursor/one_finger.png" alt="profile-pic" width="500" height="350" /><br><p style="text-align:left;">K is a constant value, for each potential finger location, I find a pair of points (contour[i-k] and contour[i+k]) and calculate the location between the pair of points. This distance been defined as l, the potential finger location with the samllest l will be consider as the precise finger location<br><h4><strong>Drawing the Path​</strong></h4><p style="text-align:left;">It will start drawing only when user raise one finger. This allow user to open palm to stop drawing and change where they want to draw.<img class="center" src="img/finger_cursor/drawing.png" alt="profile-pic" width="500" height="350" /><p style="text-align:left;">Also, since I am using realsense D435i which is a depth camera, I am able to record all 3D location of the path.<img class="center" src="img/finger_cursor/3d.png" alt="profile-pic" width="500" height="350" />

---