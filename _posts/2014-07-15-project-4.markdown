---
layout: default
modal-id: 4
title: Jack In a Box
short-caption: Jack In a Box
date: 2023-12-1
img: Jack_In_Box.gif
alt: image-alt
project-date: 2023-12-1
category: Dynamics, Simulation
github: https://github.com/JihaiZhao/Jack-In-a-Box
description: <br><h4><strong>Overview</strong></h4><p>The goal of this project is to simulate a jack bouncing inside of a moving box. The drawing below shows the configuration and transformation of frames I used. For simulation, I simulate the jack starting at the center of the box with zero initial velocity and zero theta for 10 seconds with a time step of 0.01s.</p><br><h4><strong>Drawing of the system</strong></h4><img class="img-responsive" src="img/me314/drawing.jpg" alt="profile-pic" /><p>Frame W is the world frame, frame A is the frame of the center of box, frame B is the frame of the center of the jack. g_B1, g_B2, g_B3, g_B4 are the transformations from frame B to the four edges of the jack. </p><br><h4><strong>Calculation description</strong></h4><p>Lagrangian equation of the system <span>:</span> L = KE - V. For kinetic energy, first get the body velocity of the box by calculating their rigid body transformation to world frame. Next convert this 4 by 4 matrix to a 6 by 1 vector and last calculate KE. (I assume the center of the mass is the center of the geometry). Last, use the same method for the jack.</p>$$\ KE = \frac{1}{2}⋅ω^T⋅I⋅ω$$</br><p>For potential energy, get the y value of the box relative to world frame and use the same method for the jack</p>$$\ V=mgh$$<p>Euler-Lagrange:</p>$$\ \frac{∂}{∂t}\frac{∂L}{∂\dot{q}}−\frac{∂L}{∂q}=F$$<p>The constrains:There are a total of 16 constraints for this system. They are each edge of the jack reach the four sides of the box.</p><p>The external force:I tried different magnitudes of force, and I found the two blow works best for me.</p>$$\ F_y = m_{box} * g *1.012$$ $$\ F_theta = m_{box} * g * 0.5$$<p>The impact update law:</p><img class="img-responsive" src="img/me314/impact_law.png" alt="profile-pic" /><p>The impact happened when one edge of the jack collided with one side of the box. P is the momentum; H is the Hamiltonian of the system. After defining the 16 constrains of the system, evaluate the related expressions at $$\ τ^+$$ and $$\ τ^-$$ and solve them for $$\ \dot{q}(τ+)$$, and the results will be the impact update rules. With the symbolic solutions for impact update, we can numerically evaluate them and define a 	function for the impact update in the simulation loop. </p></br></br>
---