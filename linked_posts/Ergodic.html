<html >
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="css/posts.css">
    <head>
        <title>Ergodic Imitation with 7-DoF Franka Arm</title>
    </head>

    <nav class="navbar">
        <a href="/.."><i class="fa fa-home" ></i></a>
    </nav>  

    <style>
        /* Remove default padding and margin for ul */
        ul {
            padding-left: 0; /* Remove left padding */
            margin-left: 0; /* Remove left margin */
            list-style-position: inside; /* Make bullet points align with content */
        }
        /* Add left margin to li for alignment with <p> */
        li {
            margin-left: 20px; /* Adjust spacing as needed */
        }
    </style>

    <body>
        <h4><strong>Overview</strong></h4>
        <!-- <p style="text-align:left;">The purpose of this project is writing software that plans a trajectory for the end-effector of the youBot mobile manipulator (a mobile base with four mecanum wheels and a 5R robot arm), performs odometry as the chassis moves, and performs feedback control to drive the youBot to pick up a block at a specified location, carry it to a desired location, and put it down.</p> -->
        <p>
            The purpose of this project is to leverage <strong>ergodic imitation</strong> to learn both desirable and undesirable behaviors. 
            To facilitate effective data collection, I first implemented an <strong>impedance control mode</strong> for a 7-DoF collaborative robotic arm 
            (Franka) in collaboration with Courtney. Subsequently, I developed a <strong>haptic-guided teleoperation</strong> system for the Franka robot. 
            This system enables the user to control <strong>Franka 1</strong>, which operates in impedance control mode, and couples its movements to 
            <strong>Franka 2</strong>, such that any motion of Franka 1 is mirrored by Franka 2.
        </p>
        <p>
            Following this, I employed a <strong>learning-from-demonstration (LfD)</strong> approach to derive robust task definitions from a combination 
            of positive and negative demonstrations. The algorithmic framework for task learning is based on the <strong>ergodic metric</strong>, a measure 
            of the information content in motion. Finally, I demonstrated the efficacy of this learning approach on (.......) using the 7-DoF Franka arm.
        </p>        
        <h4><strong>Video Demo</strong></h4>
        <iframe width="600" height="450" src="https://www.youtube.com/embed/q7HbfBILOt4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        
        <p style="text-align:left;">To achieve the goal of the project, I wrote four functions:</p>
        <ul>
            <li>
                <h5 style="text-align:left;">NextState</h5>
                <ul>
                    <li>
                        <p style="text-align:left;"><strong>Input:</strong> The input of the function includes <code>config</code>, <code>speed</code>, <code>timestep</code>, and <code>max_speed</code>.</p>
                        <ul>
                            <li><strong>config:</strong> A 12-vector representing the current configuration of the robot (3 variables for the chassis configuration, 5 variables for the arm configuration, and 4 variables for the wheel angles).</li>
                            <li><strong>speed:</strong> A 9-vector of controls indicating the wheel speeds and the arm joint speeds.</li>
                            <li><strong>timestep:</strong> A timestep.</li>
                            <li><strong>max_speed:</strong> A positive real value indicating the maximum angular speed of the arm joints and the wheels. Speeds outside the range are set to the nearest boundary.</li>
                        </ul>
                    </li>
                    <li>
                        <p style="text-align:left;"><strong>Output:</strong> The return of the function is <code>new_config</code>.</p>
                        <ul>
                            <li><strong>new_config:</strong> A 12-vector representing the configuration of the robot.</li>
                            <li>The function is based on a simple first-order Euler step, updating arm joint angles, wheel angles, and chassis configuration using odometry.</li>
                        </ul>
                    </li>
                </ul>
            </li>
    
            <li>
                <h5 style="text-align:left;">TrajectoryGenerator</h5>
                <ul>
                    <li>
                        <p style="text-align:left;"><strong>Input:</strong> The function takes <code>Tse_initial</code>, <code>Tsc_initial</code>, <code>Tsc_goal</code>, <code>Tce_grasp</code>, <code>Tce_standoff</code>, and <code>k</code>.</p>
                        <ul>
                            <li><strong>Tse_initial:</strong> Initial configuration of the end-effector in the reference trajectory.</li>
                            <li><strong>Tsc_initial:</strong> Cube's initial configuration.</li>
                            <li><strong>Tsc_goal:</strong> Cube's desired final configuration.</li>
                            <li><strong>Tce_grasp:</strong> End-effector's configuration relative to the cube when grasping.</li>
                            <li><strong>Tce_standoff:</strong> Standoff configuration above the cube.</li>
                            <li><strong>k:</strong> Number of trajectory reference configurations per 0.01 seconds.</li>
                        </ul>
                    </li>
                    <li>
                        <p style="text-align:left;"><strong>Output:</strong> The return of the function is <code>N_final</code>.</p>
                        <ul>
                            <li><strong>N_final:</strong> A representation of the N configurations of the end-effector along the concatenated eight-segment reference trajectory. Each configuration includes a transformation matrix and gripper state.</li>
                        </ul>
                    </li>
                </ul>
            </li>
    
            <li>
                <h5 style="text-align:left;">FeedbackControl</h5>
                <ul>
                    <li>
                        <p style="text-align:left;"><strong>Input:</strong> The function takes <code>X</code>, <code>Xd</code>, <code>Xd_next</code>, <code>Kp</code>, <code>Ki</code>, and <code>delta_t</code>.</p>
                        <ul>
                            <li><strong>X:</strong> Current actual end-effector configuration (T<sub>se</sub>).</li>
                            <li><strong>Xd:</strong> Current end-effector reference configuration (T<sub>se,d</sub>).</li>
                            <li><strong>Xd_next:</strong> Next timestep reference configuration (T<sub>se,d,next</sub>).</li>
                            <li><strong>Kp, Ki:</strong> PI gain matrices.</li>
                            <li><strong>delta_t:</strong> Timestep between reference trajectory configurations.</li>
                        </ul>
                    </li>
                    <li>
                        <p style="text-align:left;"><strong>Output:</strong></p>
                        <ul>
                            <li><strong>V:</strong> Commanded end-effector twist expressed in the end-effector frame.</li>
                            <li><strong>Xerr:</strong> Error twist.</li>
                        </ul>
                    </li>
                </ul>
            </li>
    
            <li>
                <h5 style="text-align:left;">testJointLimits</h5>
                <ul>
                    <li>
                        <p style="text-align:left;"><strong>Purpose:</strong> Helps the robot arm avoid singularities. Ensures joints 3 and 4 remain less than -0.3.</p>
                    </li>
                    <li>
                        <p style="text-align:left;"><strong>Input:</strong> <code>joint_theta</code>: Joint angles to check against limits.</p>
                    </li>
                    <li>
                        <p style="text-align:left;"><strong>Output:</strong> <code>res</code>: Indicates which joints exceed limits.</p>
                    </li>
                </ul>
            </li>
        </ul>
    </body>
    </html>